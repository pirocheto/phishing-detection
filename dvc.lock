schema: '2.0'
stages:
  train:
    cmd: python src/train.py
    deps:
    - path: data/train.parquet
      hash: md5
      md5: 3c534049e2da8ae55ebb8c982f7bae31
      size: 788989
    - path: src/train.py
      hash: md5
      md5: 87dc6175fe8965e68d2e2941ecb896d3
      size: 947
    params:
      params.yaml:
        data.train: data/train.parquet
        hyperparams:
          C: 9.783081707940896
          loss: hinge
          lowercase: true
          max_ngram_char: 5
          max_ngram_word: 2
          tol: 0.0003837000703754547
          use_idf: false
    outs:
    - path: model/model.pkl
      hash: md5
      md5: 2897c101ae216fce3768125dbfd0c56d
      size: 19005269
  optimize:
    cmd: python src/train.py
    deps:
    - path: data
      hash: md5
      md5: 7951f4f5dfd40734ffe6bd1350a7aa24.dir
      size: 3661494
      nfiles: 3
    outs:
    - path: dvclive
      hash: md5
      md5: bc4ae7ed265f80f958f312890a2f330d.dir
      size: 7792
      nfiles: 16
  modelcard:
    cmd: python src/modelcard.py
    deps:
    - path: load_model
      hash: md5
      md5: d8b7076ac9ef351d3b0ea3eaa76e3e47.dir
      size: 32362191
      nfiles: 6
    - path: metrics.json
      hash: md5
      md5: 485c91cebfee2786810903fd5aca1d7e
      size: 179
    - path: src/modelcard.py
      hash: md5
      md5: 839f33a0974d9a06136a12a62556a2d4
      size: 1446
    - path: templates/modelcard.md.j2
      hash: md5
      md5: 7081abf10b503b76f08a5fb482b12067
      size: 1863
    outs:
    - path: model/README.md
      hash: md5
      md5: 968645c718cbded46a079c7b3c0f1efc
      size: 6115
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test.parquet
      hash: md5
      md5: b589781569feb40bd244579d4e0e3e85
      size: 430668
    - path: model/model.pkl
      hash: md5
      md5: 2897c101ae216fce3768125dbfd0c56d
      size: 19005269
    - path: src/evaluate.py
      hash: md5
      md5: c602c4dc575896afeda37199b9189b8f
      size: 825
    params:
      params.yaml:
        data.train: data/train.parquet
    outs:
    - path: metrics.json
      hash: md5
      md5: 485c91cebfee2786810903fd5aca1d7e
      size: 179
  download_data:
    cmd:
    - mkdir -p data
    - "wget https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/train.parquet\
      \  -O data/train.parquet  -q --show-progress\n"
    - "wget https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/test.parquet\
      \  -O data/test.parquet  -q --show-progress\n"
    deps:
    - path: 
        https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/test.parquet
      hash: md5
      checksum: '"b589781569feb40bd244579d4e0e3e85"'
      size: 430668
    - path: 
        https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/train.parquet
      hash: md5
      checksum: '"3c534049e2da8ae55ebb8c982f7bae31"'
      size: 788989
    outs:
    - path: data
      hash: md5
      md5: b8e1fb3456824207aea9c408a79f6e0f.dir
      size: 1219657
      nfiles: 2
  create_onnx:
    cmd: python src/pkl2onnx.py
    deps:
    - path: model/model.pkl
      hash: md5
      md5: 2897c101ae216fce3768125dbfd0c56d
      size: 19005269
    - path: src/pkl2onnx.py
      hash: md5
      md5: 92c0750ad738d713d5294e694e41530f
      size: 581
    outs:
    - path: model/model.onnx
      hash: md5
      md5: 1213115e64bb14e3da6086f46112b062
      size: 25986513
