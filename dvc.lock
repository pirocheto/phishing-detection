schema: '2.0'
stages:
  train:
    cmd: python src/train.py
    deps:
    - path: data/train.parquet
      hash: md5
      md5: 3c534049e2da8ae55ebb8c982f7bae31
      size: 788989
    - path: src/train.py
      hash: md5
      md5: 87dc6175fe8965e68d2e2941ecb896d3
      size: 947
    params:
      params.yaml:
        data.train: data/train.parquet
        hyperparams:
          C: 9.783081707940896
          loss: hinge
          lowercase: true
          max_ngram_char: 5
          max_ngram_word: 2
          tol: 0.0003837000703754547
          use_idf: false
    outs:
    - path: model/model.pkl
      hash: md5
      md5: d238f008d12d6355898f60aa95193b29
      size: 19005268
  optimize:
    cmd: python src/train.py
    deps:
    - path: data
      hash: md5
      md5: 7951f4f5dfd40734ffe6bd1350a7aa24.dir
      size: 3661494
      nfiles: 3
    outs:
    - path: dvclive
      hash: md5
      md5: bc4ae7ed265f80f958f312890a2f330d.dir
      size: 7792
      nfiles: 16
  modelcard:
    cmd: python src/modelcard.py
    deps:
    - path: metrics.json
      hash: md5
      md5: ee099ac42bca2cc87872ba1bd98f4fea
      size: 174
    - path: resources/modelcard
      hash: md5
      md5: e78ed7e05655175d8a2c9047ecf75b6a.dir
      size: 32364054
      nfiles: 7
    - path: src/modelcard.py
      hash: md5
      md5: 511cbe0415df90cc7de5bba209e0a202
      size: 1471
    outs:
    - path: model/README.md
      hash: md5
      md5: 8527bbfb543ad5611b2aafbb4e5e8d24
      size: 6094
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test.parquet
      hash: md5
      md5: b589781569feb40bd244579d4e0e3e85
      size: 430668
    - path: model/model.pkl
      hash: md5
      md5: d238f008d12d6355898f60aa95193b29
      size: 19005268
    - path: src/evaluate.py
      hash: md5
      md5: b02d11f29b63185a105c914d6a6c5061
      size: 1656
    params:
      params.yaml:
        data.test: data/test.parquet
    outs:
    - path: images
      hash: md5
      md5: 2af8fad2d8dbe7f1916cc551f8488966.dir
      size: 122820
      nfiles: 5
    - path: metrics.json
      hash: md5
      md5: ee099ac42bca2cc87872ba1bd98f4fea
      size: 174
  download_data:
    cmd:
    - mkdir -p data
    - wget 
      https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/train.parquet
      -O data/train.parquet -q --show-progress
    - wget 
      https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/test.parquet
      -O data/test.parquet -q --show-progress
    deps:
    - path: 
        https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/test.parquet
      hash: md5
      checksum: '"b589781569feb40bd244579d4e0e3e85"'
      size: 430668
    - path: 
        https://huggingface.co/datasets/pirocheto/phishing-url/resolve/main/data/train.parquet
      hash: md5
      checksum: '"3c534049e2da8ae55ebb8c982f7bae31"'
      size: 788989
    outs:
    - path: data
      hash: md5
      md5: b8e1fb3456824207aea9c408a79f6e0f.dir
      size: 1219657
      nfiles: 2
  create_onnx:
    cmd: python src/pkl2onnx.py
    deps:
    - path: model/model.pkl
      hash: md5
      md5: d238f008d12d6355898f60aa95193b29
      size: 19005268
    - path: src/pkl2onnx.py
      hash: md5
      md5: 92c0750ad738d713d5294e694e41530f
      size: 581
    outs:
    - path: model/model.onnx
      hash: md5
      md5: 9eed2b46f8367ee5b6c30bd945ad6ccc
      size: 25986513
